{"version":3,"sources":["services/httpServices.js","services/movieService.js","services/genreService.js","components/common/tableHeader.jsx","components/common/tableBody.jsx","components/common/table.jsx","components/common/like.jsx","services/authService.js","components/moviesTable.jsx","components/common/listGroup.jsx","components/common/pagination.jsx","components/common/input.jsx","components/movies.jsx","components/common/select.jsx","components/common/form.jsx","components/movieForm.jsx","components/customers.jsx","components/rentals.jsx","components/common/not-found.jsx","components/common/navBar.jsx","components/loginForm.jsx","services/userService.js","components/registerForm.jsx","components/logout.jsx","components/common/protectedRoute.jsx","App.js","serviceWorker.js","index.js"],"names":["axios","defaults","baseURL","process","interceptors","response","use","error","status","console","log","toast","Promise","reject","get","put","post","delete","setJwt","jwt","headers","common","saveMovie","movie","movie_to_save","_id","http","deleteMovie","id","getGenres","TableHeader","raiseSort","path","sortColumn","props","order","onSort","renderSortIcon","column","className","this","columns","map","role","onClick","key","label","Component","TableBody","renderCell","item","content","_","createKey","data","Table","Like","Fragment","liked","jwtDecode","require","a","username","password","localStorage","setItem","getJwt","getItem","login","loginWithJwt","logout","removeItem","getCurrentUser","ex","MoviesTable","to","title","onLike","deleteColumn","onDelete","user","auth","isAdmin","push","movies","ListGroup","items","valueProperty","textProperty","selectedItem","onItemSelect","name","defaultProps","Pagination","itemCount","currentPage","pageSize","onPageChange","pageCount","Math","ceil","pageButtons","i","value","aria-label","getPageButtons","Input","smallLabel","rest","htmlFor","aria-describedby","Movies","state","genres","searchString","selectedGenre","handleDelete","originalMovies","filter","m","setState","handleLike","index","indexOf","handlePageChange","page","target","handleGenreSelect","genre","handleSort","getPagedData","allMovies","filterMovies","tempMovies","sorted","orderBy","count","length","splice","handleSearch","currentTarget","match","RegExp","placeholder","onChange","autoFocus","type","onNewMovie","handleNewMovie","Select","options","o","Form","errors","validate","Joi","schema","abortEarly","details","message","validateProperty","obj","handleSubmit","e","preventDefault","doSubmit","handleChange","input","errMsg","renderButton","disabled","renderInput","renderSelect","genreId","MovieForm","numberInStock","dailyRentalRate","string","max","required","min","number","the_movie","history","movieId","params","replace","populateGenres","populateMovie","onSubmit","Customers","Rentals","NotFound","NavBar","data-toggle","data-target","aria-controls","aria-expanded","LoginForm","React","createRef","email","the_user","success","location","window","from","pathname","register","RegisterForm","minDomainSegments","tlds","allow","new_user","Logout","ProtectedRoute","component","render","App","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.8affd5b6.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\naxios.defaults.baseURL\t= process.env.REACT_APP_API_URL;\r\n// Set up axios interceptor for all the responses from the server.\r\n// First parameter is the function that will be executed when the request succeeded.\r\n// The second one will execute on error.\r\naxios.interceptors.response.use(null, error => {\r\n\t// Check if we are dealing with an expected error or not. 400 to 499 are expected error statuses.\r\n\tconst expectedError\t= error.response && error.response.status >= 400 && error.response.status < 500;\r\n\t\r\n\tif(!expectedError) {\r\n\t\tconsole.log('Logging the error', error);\r\n\t\ttoast.error('Some unexpected shit has happened on the server. Unable to complete request...');\r\n\t}\r\n\t\r\n\t// Need to return a rejected promise to pass control to the catch block\r\n\treturn Promise.reject(error);\r\n});\r\n\r\n// Add this function to fix bi-directional dependencies: authService -> httpService and vice-versa\r\nfunction setJwt(jwt) {\r\n\t// Tell axios to append this header to all http requests\r\n\taxios.defaults.headers.common['x-auth-token']\t= jwt;\r\n}\r\n\r\nexport default {\r\n\tget:\taxios.get,\r\n\tput:\taxios.put,\r\n\tpost:\taxios.post,\r\n\tdelete:\taxios.delete,\r\n\tsetJwt\r\n};","import http from './httpServices';\r\n\r\nexport function getMovies() {\r\n\treturn http.get('/movies');\r\n};\r\n\r\nexport function getMovie(id) {\r\n\treturn http.get(`/movies/${id}`);\r\n};\r\n\r\nexport function saveMovie(movie) {\r\n\tconst movie_to_save\t= { ...movie };\r\n\tdelete movie_to_save._id;\r\n\t\r\n\tif(movie._id !== 'none') return http.put(`/movies/${movie._id}`, movie_to_save);\r\n\telse return http.post('/movies', movie_to_save);\r\n};\r\n\r\nexport function deleteMovie(id) {\r\n\treturn http.delete(`/movies/${id}`);\r\n};","import http from './httpServices';\r\n\r\nexport function getGenres() {\r\n\treturn http.get('/genres');\r\n};","import React, { Component } from 'react';\r\n\r\nclass TableHeader extends Component {\r\n\traiseSort = path => {\r\n\t\tconst sortColumn\t= { ...this.props.sortColumn };\r\n\t\t\r\n\t\tif(sortColumn.path === path) {\r\n\t\t\tsortColumn.order\t= (sortColumn.order === 'asc') ? 'desc' : 'asc';\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsortColumn.path\t\t= path;\r\n\t\t\tsortColumn.order\t= 'asc';\r\n\t\t}\r\n\t\t\r\n\t\tthis.props.onSort(sortColumn);\r\n\t}\r\n\t\r\n\trenderSortIcon\t= column => {\r\n\t\tconst { sortColumn }\t= this.props;\r\n\t\t\r\n\t\tif (column.path !== sortColumn.path) return null;\r\n\t\tif (sortColumn.order === 'asc') return <i className='fa fa-sort-up' />;\r\n\t\treturn <i className='fa fa-sort-down' />\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn ( <thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t{ this.props.columns.map(column =>\r\n\t\t\t\t\t\t<th role='button'\r\n\t\t\t\t\t\t\tonClick={() => this.raiseSort(column.path)}\r\n\t\t\t\t\t\t\tkey={column.path || column.key}>\r\n\t\t\t\t\t\t\t{ column.label } { this.renderSortIcon(column) }\r\n\t\t\t\t\t\t</th>)\r\n\t\t\t\t\t}\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TableHeader;","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nclass TableBody extends Component {\r\n\trenderCell\t= (item, column)\t=> {\r\n\t\tif (column.content) return column.content(item);\r\n\t\treturn _.get(item, column.path);\r\n\t};\r\n\t\r\n\tcreateKey\t= (item, column) => {\r\n\t\treturn item._id + (column.path || column.key);\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tconst { data, columns }\t= this.props;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<tbody>\r\n\t\t\t\t{ data.map(item => <tr key={item._id}>\r\n\t\t\t\t\t{columns.map(column => <td\r\n\t\t\t\t\t\tkey={this.createKey(item, column)}>\r\n\t\t\t\t\t\t{this.renderCell(item, column)}\r\n\t\t\t\t\t</td>)}\r\n\t\t\t\t</tr>)}\r\n\t\t\t</tbody>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TableBody;","import React\t\tfrom 'react';\r\nimport TableHeader\tfrom './tableHeader';\r\nimport TableBody\tfrom './tableBody';\r\n\r\nconst Table\t= ({ columns, sortColumn, onSort, data }) => {\r\n\treturn (\r\n\t\t<table className='table'>\r\n\t\t\t<TableHeader\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsortColumn={sortColumn}\r\n\t\t\t\tonSort={onSort}\r\n\t\t\t/>\r\n\t\t\t<TableBody columns={columns} data={data} />\r\n\t\t</table>\r\n\t);\r\n};\r\n\r\nexport default Table;","import React from 'react';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nconst Like\t= props => {\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<i\r\n\t\t\t\tclassName={props.liked ? \"fa fa-heart\" : \"fa fa-heart-o\"}\r\n\t\t\t\tonClick={props.onClick}\r\n\t\t\t\trole='button'>\r\n\t\t\t</i>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nexport default Like;\r\n","import http from './httpServices';\r\n\r\nconst jwtDecode\t= require('jwt-decode');\r\nconst tokenKey\t= 'token';\r\n\r\nhttp.setJwt(getJwt());\r\n\r\nexport async function login({ username, password }) {\r\n\tconst { data: jwt }\t= await http.post('/auth', { username, password });\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport function loginWithJwt(jwt) {\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n}\r\n\r\nexport function getCurrentUser() {\r\n\ttry {\r\n\t\tconst jwt\t= localStorage.getItem(tokenKey);\r\n\t\treturn jwtDecode(jwt);\r\n\t}\r\n\tcatch (ex) {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport function logout() {\r\n\tlocalStorage.removeItem(tokenKey);\r\n}\r\n\r\nexport function getJwt() {\r\n\treturn localStorage.getItem(tokenKey);\r\n}\r\n\r\nexport default {\r\n\tlogin,\r\n\tloginWithJwt,\r\n\tlogout,\r\n\tgetCurrentUser,\r\n\tgetJwt\r\n};","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Table\tfrom './common/table';\r\nimport Like from './common/like';\r\nimport auth from '../services/authService';\r\n\r\nclass MoviesTable extends Component {\r\n\tcolumns\t= ([\r\n\t\t{\r\n\t\t\tpath: 'title',\r\n\t\t\tlabel: 'Title',\r\n\t\t\tcontent: movie => <Link to={`/movies/${movie._id}`}>{movie.title}</Link>\r\n\t\t},\r\n\t\t{ path: 'genre.name', label: 'Genre' },\r\n\t\t{ path: 'numberInStock', label: 'Stock' },\r\n\t\t{ path: 'dailyRentalRate', label: 'Rate' },\r\n\t\t{ key: 'like', content: movie => <Like liked={movie.liked} onClick={() => this.props.onLike(movie)} /> }\r\n\t]);\r\n\t\r\n\tdeleteColumn\t= {\r\n\t\tkey: 'delete',\r\n\t\tcontent: movie => \r\n\t\t\t<button\r\n\t\t\t\tonClick={() => this.props.onDelete(movie)}\r\n\t\t\t\tclassName='btn btn-danger btn-sm'>Delete\r\n\t\t\t</button>\r\n\t};\r\n\t\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst user\t= auth.getCurrentUser();\r\n\t\t\r\n\t\tif(user && user.isAdmin) {\t\t\t\r\n\t\t\tthis.columns.push(this.deleteColumn);\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { movies, onSort, sortColumn }\t= this.props;\r\n\t\r\n\t\treturn (\r\n\t\t\t<Table columns={this.columns} sortColumn={sortColumn} onSort={onSort} data={movies} />\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MoviesTable;\r\n","import React from 'react';\r\n\r\n//class Genres extends Component {\r\n//\trender() {\r\nfunction ListGroup(props) {\r\n\tconst { items, valueProperty, textProperty, selectedItem, onItemSelect }\t= props;\r\n\t\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<ul className=\"list-group\">\r\n\t\t\t\t{\r\n\t\t\t\t\titems.map(item =>\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName={'list-group-item' + (selectedItem[textProperty] === item.name ? ' active' : '')}\r\n\t\t\t\t\t\t\tonClick={() => onItemSelect(item)}\r\n\t\t\t\t\t\t\trole='button'\r\n\t\t\t\t\t\t\tkey={item[valueProperty]}\r\n\t\t\t\t\t\t\t>{item[textProperty]}\r\n\t\t\t\t\t\t</li>)\r\n\t\t\t\t}\r\n\t\t\t</ul>\r\n\t\t</React.Fragment>\r\n\t);\r\n}\r\n\r\nListGroup.defaultProps\t= {\r\n\ttextProperty:\t'name',\r\n\tvalueProperty:\t'_id'\r\n}\r\n\r\nexport default ListGroup;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Pagination extends Component {\r\n\t\r\n\tgetPageButtons() {\r\n\t\tconst { itemCount, currentPage, pageSize, onPageChange }\t= this.props;\r\n\t\t\r\n\t\tconst pageCount\t\t= Math.ceil(itemCount / pageSize);\r\n\t\tconst pageButtons\t= [];\r\n\t\t\r\n\t\tfor(let i=0;i<pageCount;i++) {\r\n\t\t\tpageButtons.push( \r\n\t\t\t\t<li className={'page-item' + (i === currentPage ? ' active' : '')}\r\n\t\t\t\t\tkey={i}>\r\n\t\t\t\t\t<button className=\"page-link\" value={i} onClick={onPageChange}>{i+1}</button>\r\n\t\t\t\t</li> );\r\n\t\t}\r\n\t\t\r\n\t\treturn pageButtons;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<nav aria-label=\"Page navigation example\">\r\n\t\t\t\t  <ul className=\"pagination\">\r\n\t\t\t\t\t{this.getPageButtons()}\r\n\t\t\t\t  </ul>\r\n\t\t\t\t</nav>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nPagination.propTypes\t= {\r\n\titemCount: PropTypes.number.isRequired,\r\n\tcurrentPage: PropTypes.number.isRequired,\r\n\tpageSize: PropTypes.number.isRequired,\r\n\tonPageChange: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Pagination;","import React from 'react';\r\n\r\nconst Input\t= ({ name, label, error, smallLabel, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"form-group\">\r\n\t\t\t<label htmlFor={name}>{label}</label>\r\n\t\t\t<input\r\n\t\t\t\tid={name}\r\n\t\t\t\tname={name}\r\n\t\t\t\t{...rest}\r\n\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\taria-describedby=\"inputHelp\"\r\n\t\t\t/>\r\n\t\t\t{ error && <div className='alert alert-danger'>{error}</div> }\r\n\t\t    <small id=\"inputHelp\" className=\"form-text text-muted\">{smallLabel}</small>\r\n\t\t  </div>\r\n\t);\r\n}\r\n\r\nexport default Input;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { deleteMovie, getMovies } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\nimport MoviesTable from './moviesTable';\r\nimport ListGroup from './common/listGroup';\r\nimport Pagination from './common/pagination';\r\nimport Input from './common/input';\r\nimport _ from 'lodash';\r\n\r\nclass Movies extends Component {\r\n\tstate\t= {\r\n\t\tmovies: [],\r\n\t\tgenres: [],\r\n\t\tsearchString: '',\r\n\t\tpageSize: 4,\r\n\t\tselectedGenre: { _id: '', name: 'All genres'},\r\n\t\tcurrentPage: 0,\r\n\t\tsortColumn: { path: 'title', order: 'asc' }\r\n\t};\r\n\t\r\n\tasync componentDidMount() {\r\n\t\tconst { data }\t\t\t= await getGenres();\r\n\t\tconst genres\t\t\t= [ { id: '', name: 'All genres' }, ...data ];\r\n\t\tconst { data: movies }\t= await getMovies();\r\n\t\tthis.setState({ movies, genres });\r\n\t}\r\n\t\r\n\thandleDelete\t= async movie => {\r\n\t\t// Now we're talking to a backend service. We turned into pesimists...\r\n\t\tconst originalMovies\t= [ ...this.state.movies ];\r\n\t\tconst movies\t\t\t= originalMovies.filter(m => m._id !== movie._id);\r\n\t\tthis.setState({ movies });\r\n\t\t\r\n\t\t//const { data: movies }\t= await getMovies();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tawait deleteMovie(movie._id);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif(ex.response && ex.response.status === 404) {\r\n\t\t\t\ttoast.error('This movie has already been deleted.');\r\n\t\t\t}\r\n\t\t\tif(ex.response && ex.response.status === 401) {\r\n\t\t\t\ttoast.error('Only logged in users can delete.');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttoast.error(`Unexpected error: ${ex.response.data}`);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setState({ movies: originalMovies });\r\n\t\t}\r\n\t}\r\n\t\r\n\thandleLike\t= movie => {\r\n\t\tconst movies\t\t= [...this.state.movies];\r\n\t\tconst index\t\t\t= movies.indexOf(movie);\r\n\t\tmovies[index]\t\t= { ...movies[index] };\r\n\t\tmovies[index].liked\t= !movies[index].liked; \r\n\t\tthis.setState({ movies });\r\n\t}\r\n\r\n\thandlePageChange\t= page => this.setState({ currentPage: page.target.value });\r\n\t\r\n\thandleGenreSelect = genre => {\r\n\t\tthis.setState({ selectedGenre: genre, currentPage: 0, searchString: '' });\r\n\t};\r\n\t\r\n\thandleSort\t= sortColumn => {\r\n\t\tthis.setState({ sortColumn });\r\n\t};\r\n\t\r\n\tgetPagedData\t= () => {\r\n\t\tconst { currentPage, pageSize, selectedGenre, sortColumn }\t= this.state;\r\n\t\t//const allMovies\t\t= [ ...this.state.movies ];\r\n\t\tconst allMovies\t\t= this.filterMovies();\r\n\t\tconst tempMovies\t= selectedGenre && selectedGenre._id\r\n\t\t\t\t? allMovies.filter(m => m.genre._id === selectedGenre._id)\r\n\t\t\t\t: allMovies;\r\n\t\tconst sorted\t\t= _.orderBy(tempMovies, [sortColumn.path], [sortColumn.order]);\r\n\t\tconst count\t\t\t= sorted.length;\r\n\t\tconst movies\t\t= sorted.splice(currentPage*pageSize, pageSize);\r\n\t\t\r\n\t\treturn { count, movies };\r\n\t};\r\n\t\r\n\t\r\n\tfilterMovies() {\r\n\t\tconst { movies, searchString }\t= this.state;\r\n\t\tconst filtered\t= movies.filter(m => m.title.match(new RegExp(searchString, 'i')));\r\n\t\treturn filtered;\r\n\t}\r\n\t\r\n\thandleSearch\t= ({ currentTarget: input }) => {\r\n\t\tconst searchString\t= input.value;\r\n\t\tthis.setState({ searchString, currentPage: 0, selectedGenre: { _id: '', name: 'All genres'} });\r\n\t};\r\n\t\r\n\trender() {\r\n\t\tconst { currentPage, pageSize, selectedGenre, sortColumn, searchString }\t= this.state;\r\n\t\tconst { count, movies }\t= this.getPagedData();\r\n\t\tconst { user } = this.props;\r\n\t\t\t\t\r\n\t\t//if (count === 0) return <p>No movies in the database</p>;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className='row'>\r\n\t\t\t\t<div className='col-3'>\r\n\t\t\t\t\t<ListGroup\r\n\t\t\t\t\t\titems={this.state.genres}\r\n\t\t\t\t\t\tselectedItem={selectedGenre}\r\n\t\t\t\t\t\tonItemSelect={this.handleGenreSelect}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col'>\r\n\t\t\t\t\t{user && (\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto='/movies/new'\r\n\t\t\t\t\t\t\tclassName='btn btn-primary'\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\tNew movie\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t<p>Showing { this.state.movies.length } movies</p>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname='search'\r\n\t\t\t\t\t\tplaceholder='Search...'\r\n\t\t\t\t\t\tvalue={searchString}\r\n\t\t\t\t\t\tonChange={this.handleSearch}\r\n\t\t\t\t\t\tautoFocus={false}\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MoviesTable \r\n\t\t\t\t\t\tmovies={movies}\r\n\t\t\t\t\t\tsortColumn={sortColumn}\r\n\t\t\t\t\t\tonLike={this.handleLike}\r\n\t\t\t\t\t\tonDelete={this.handleDelete}\r\n\t\t\t\t\t\tonSort={this.handleSort}\r\n\t\t\t\t\t\tonNewMovie={this.handleNewMovie}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\titemCount={count}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t\tonPageChange={this.handlePageChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n}\r\n\r\nexport default Movies;","import React from 'react';\r\n\r\nconst Select\t= ({ name, label, error, smallLabel, options, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"form-group\">\r\n\t\t\t<label htmlFor={name}>{label}</label>\r\n\t\t\t<select id={name} name={name} {...rest} aria-describedby=\"selectHelp\" className=\"form-control\">\r\n\t\t\t\t<option key='none' value='' />\r\n\t\t\t\t{options.map(o => <option key={o._id} value={o._id}>{o.name}</option>)}\r\n\t\t\t</select>\r\n\t\t\t{ error && <div className='alert alert-danger'>{error}</div> }\r\n\t\t\t<small id=\"selectHelp\" className=\"form-text text-muted\">{smallLabel}</small>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Select;","import React, { Component } from 'react';\r\nimport Joi from 'joi-browser';\r\nimport Input from './input';\r\nimport Select from './select';\r\n\r\nexport default class Form extends Component {\r\n\tstate = {\r\n\t\tdata:\t{},\r\n\t\terrors:\t{}\r\n\t};\r\n\t\r\n\tvalidate = () => {\r\n\t\t//const result\t= this.schema.validate(this.state.data);\r\n\t\tconst { error }\t= Joi.validate(this.state.data, this.schema, { abortEarly: false });\r\n\t\t\r\n\t\tif(!error) return null;\r\n\t\r\n\t\tconst errors\t= {};\t\r\n\t\tfor(let item of error.details) errors[item.path[0]] = item.message;\r\n\t\t\r\n\t\treturn errors;\r\n\t};\r\n\t\r\n\tvalidateProperty = ({ name, value }) => {\r\n\t\tconst obj\t\t= { [name]: value };\r\n\t\tconst schema\t= { [name]: this.schema[name] }\r\n\t\tconst { error }\t= Joi.validate(obj, schema);\r\n\t\t\r\n\t\treturn error ? error.details[0].message : null;\r\n\t};\r\n\t\r\n\thandleSubmit\t= e => {\r\n\t\te.preventDefault();\r\n\t\t\r\n\t\tconst errors\t= this.validate();\r\n\t\tthis.setState({ errors: errors || {} });\r\n\t\tif(errors) return;\r\n\t\t\r\n\t\tthis.doSubmit();\r\n\t};\r\n\t\r\n\thandleChange\t= ({ currentTarget: input }) => {\r\n\t\tconst errors\t\t= { ...this.state.errors };\r\n\t\tconst errMsg\t\t= this.validateProperty(input);\r\n\t\t\r\n\t\tif(errMsg) errors[input.name] = errMsg;\r\n\t\telse delete errors[input.name];\r\n\t\t\r\n\t\tconst data\t\t= { ...this.state.data };\r\n\t\tdata[input.name]\t= input.value;\r\n\t\tthis.setState({ data, errors });\r\n\t};\r\n\t\r\n\trenderButton\t= label => {\r\n\t\treturn (\r\n\t\t\t<button disabled={this.validate()} type=\"submit\" className=\"btn btn-primary\">{label}</button>\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderInput\t\t= (name, label, type = 'text', smallLabel = '', autoFocus = false) => {\r\n\t\tconst\t{ data, errors }\t= this.state;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Input\r\n\t\t\t\tname={name}\r\n\t\t\t\tvalue={data[name]}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tautoFocus={autoFocus}\r\n\t\t\t\ttype={type}\r\n\t\t\t\tsmallLabel={smallLabel}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderSelect\t= (name, label, options, smallLabel = '', autoFocus = false) => {\r\n\t\tconst\t{ data, errors }\t= this.state;\r\n\t\treturn (\r\n\t\t\t<Select\r\n\t\t\t\tname={name}\r\n\t\t\t\tvalue={data.genreId}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tautoFocus={autoFocus}\r\n\t\t\t\tsmallLabel={smallLabel}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n}","import React from 'react';\r\nimport { getGenres } from '../services/genreService';\r\nimport { getMovie, saveMovie } from '../services/movieService';\r\nimport { toast } from 'react-toastify';\r\nimport Joi from 'joi-browser';\r\nimport Form from './common/form';\r\n\r\nclass MovieForm extends Form {\r\n\tstate\t= {\r\n\t\tdata: { _id: 'none', title: '', genreId: '', numberInStock: '', dailyRentalRate: '' },\r\n\t\tgenres: [],\r\n\t\terrors: {}\r\n\t};\r\n\t\r\n\tasync populateGenres() {\r\n\t\ttry {\r\n\t\t\tvar { data: genres }\t= await getGenres();\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif(ex.response) return;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ genres });\r\n\t}\r\n\t\r\n\tasync populateMovie() {\r\n\t\ttry {\r\n\t\t\tconst movieId\t= this.props.match.params.id;\r\n\t\t\tif(movieId === 'new') return;\r\n\t\t\tvar { data: movie }\t= await getMovie(movieId);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif(ex.response && ex.response.status === 404) return this.props.history.replace('/not-found');\r\n\t\t}\r\n\t\t\r\n\t\tconst data\t= {\r\n\t\t\t_id: movie._id,\r\n\t\t\ttitle: movie.title,\r\n\t\t\tgenreId: movie.genre._id,\r\n\t\t\tnumberInStock: movie.numberInStock,\r\n\t\t\tdailyRentalRate: movie.dailyRentalRate\r\n\t\t};\r\n\t\t\r\n\t\tthis.setState({ data });\r\n\t}\r\n\t\r\n\tasync componentDidMount() {\r\n\t\tawait this.populateGenres();\r\n\t\tawait this.populateMovie();\r\n\t}\r\n\t\r\n\tschema\t= {\r\n\t\t_id:\t\t\t\tJoi.string().max(64).required(),\r\n\t\ttitle:\t\t\t\tJoi.string().max(64).required().label('Title'),\r\n\t\tgenreId:\t\t\tJoi.string().min(5).max(64).required().label('Genre'),\r\n\t\tnumberInStock:\t\tJoi.number().min(0).max(100).required().label('Stock'),\r\n\t\tdailyRentalRate:\tJoi.number().min(0).max(10).required().label('Rate')\r\n\t};\r\n\t\r\n\tdoSubmit = async () => {\r\n\t\tconst the_movie\t= { ...this.state.data };\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsaveMovie(the_movie);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\ttoast.error(`Unable to save movie: ${ex}`)\r\n\t\t}\r\n\t\t\r\n\t\t//console.log(saved);\r\n\t\tthis.props.history.push('/movies');\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t{ this.renderInput('title', 'Title', 'text', null, true) }\r\n\t\t\t\t{ this.renderSelect('genreId', 'Genre', this.state.genres) }\r\n\t\t\t\t{ this.renderInput('numberInStock', 'Stock', 'number')}\r\n\t\t\t\t{ this.renderInput('dailyRentalRate', 'Rate', 'number')}\r\n\t\t\t\t{ this.renderButton('Save') }\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MovieForm;","import React, { Component } from 'react';\r\n\r\nclass Customers extends Component {\r\n\tstate\t= {\r\n\t\t\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<h1>Customers</h1>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Customers;","import React, { Component } from 'react';\r\n\r\nclass Rentals extends Component {\r\n\tstate\t= {\r\n\t\t\r\n\t};\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<h1>Rentals</h1>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Rentals;","import React from 'react';\r\n\r\nconst NotFound = () => {\r\n\treturn (\r\n\t\t<h1>Not found... Are you lost?</h1>\r\n\t);\r\n}\r\n\r\nexport default NotFound;","import React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom'; \r\n\r\nconst NavBar\t= ({ user }) => {\r\n\treturn (\r\n\t\t<nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n\t\t\t<Link className=\"navbar-brand\" to=\"/\">Vidly</Link>\r\n\t\t\t<button\r\n\t\t\t\tclassName=\"navbar-toggler\"\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tdata-toggle=\"collapse\"\r\n\t\t\t\tdata-target=\"#navbarSupportedContent\"\r\n\t\t\t\taria-controls=\"navbarSupportedContent\"\r\n\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\taria-label=\"Toggle\r\n\t\t\t\tnavigation\">\r\n\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t</button>\r\n\t\t\r\n\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t<NavLink className='nav-item nav-link' to='/movies'>Movies</NavLink>\r\n\t\t\t\t\t<NavLink className='nav-item nav-link' to='/customers'>Customers</NavLink>\r\n\t\t\t\t\t<NavLink className='nav-item nav-link' to='/rentals'>Rentals</NavLink>\r\n\t\t\t\t\t{!user &&\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<NavLink className='nav-item nav-link' to='/login'>Login</NavLink>\r\n\t\t\t\t\t\t\t<NavLink className='nav-item nav-link' to='/register'>Register</NavLink>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{user &&\r\n\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t<NavLink className='nav-item nav-link' to='/me'>{user.name}</NavLink>\r\n\t\t\t\t\t\t\t<NavLink className='nav-item nav-link' to='/logout'>Logout</NavLink>\r\n\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t);\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport Form from './common/form';\r\nimport auth from '../services/authService';\r\n\r\nclass LoginForm extends Form {\r\n\tstate\t= {\r\n\t\tdata: { username: '', password: '' },\r\n\t\terrors: {}\r\n\t};\r\n\t\r\n\tusername\t= React.createRef();\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t// Use refs only when necessary. In this case, using the autoFocus atributte would be a better choice\r\n\t\t//this.username.current.focus();\r\n\t}\r\n\t\r\n\tschema\t= {\r\n\t\tusername: Joi.string().min(5).max(64).required().email().label('Email'),\r\n\t\tpassword: Joi.string().min(8).max(64).required().label('Password')\r\n\t};\r\n\t\r\n\tdoSubmit = async () => {\r\n\t\ttry {\r\n\t\t\tconst the_user\t= { ...this.state.data };\r\n\t\t\tawait auth.login(the_user);\r\n\t\t\ttoast.success(`Login succesfull!`);\r\n\t\t\t// Using the history object to move to the home page will not re-render the app component\r\n\t\t\t// We need to do a full page reload to update the navbar with the name of the logged in user\r\n\t\t\t// as well as the logout link.\r\n\t\t\t//this.props.history.push('/movies');\t\t\t\r\n\t\t\t//\r\n\t\t\tconst { state }\t= this.props.location;\r\n\t\t\twindow.location\t= state ? state.from.pathname : '/';\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif(ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors\t= { ...this.state.errors };\r\n\t\t\t\terrors.username\t= ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t\treturn toast.error(`Error: ${ex.response.data}`);\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t//if(auth.getCurrentUser()) return <Redirect to='/movies' />;\r\n\t\tif(auth.getCurrentUser()) {\r\n\t\t\ttoast.error('You already are logged in, klutz!');\r\n\t\t\treturn <Redirect to='/movies' />;\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{ this.renderInput('username', 'Email', null, null, true) }\r\n\t\t\t\t\t{ this.renderInput('password', 'Password', 'password') }\r\n\t\t\t\t\t{ this.renderButton('Login') }\r\n\t\t\t\t</form>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoginForm;","import http from './httpServices';\r\n\r\nexport function register(user) {\r\n\treturn http.post('/users', {\r\n\t\temail:\t\tuser.username,\r\n\t\tpassword:\tuser.password,\r\n\t\tname:\t\tuser.name\r\n\t});\r\n}","import React from 'react';\r\nimport Joi from 'joi-browser';\r\nimport { toast } from 'react-toastify';\r\nimport Form from './common/form';\r\nimport { register } from '../services/userService';\r\nimport auth from '../services/authService';\r\n\r\nclass RegisterForm extends Form {\r\n\tstate\t= {\r\n\t\tdata: { username: '', name: '', password: '' },\r\n\t\terrors: {}\r\n\t};\r\n\t\r\n\tschema\t= {\r\n\t\tusername:\tJoi.string().email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } }).required().label('Email'),\r\n\t\tname:\t\tJoi.string().min(5).max(32).required().label('Name'),\r\n\t\tpassword:\tJoi.string().min(8).max(64).required().label('Password')\r\n\t};\r\n\t\r\n\tdoSubmit = async() => {\r\n\t\ttry {\r\n\t\t\tconst new_user\t= { ...this.state.data };\r\n\t\t\tconst response\t= await register(new_user);\r\n\t\t\t// The backend has to send the jason web token in order to login from here and\r\n\t\t\t// avoid the need of logging in from the form.\r\n\t\t\t// The web token can be on the header of the http response or within the body.\r\n\t\t\tauth.loginWithJwt(response.headers['x-auth-token']);\r\n\t\t\ttoast.success(`User '${this.state.data.name}' succesfully registered!`);\r\n\t\t\t// Using the history object to move to the home page will not re-render the app component\r\n\t\t\t// We need to do a full page reload to update the navbar with the name of the logged in user\r\n\t\t\t// as well as the logout link.\r\n\t\t\t//this.props.history.push('/movies');\r\n\t\t\twindow.location\t= '/';\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tif(ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors\t= { ...this.state.errors };\r\n\t\t\t\terrors.username\t= ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t\treturn toast.error(`Error: ${ex.response.data}`);\t\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\trender() {\r\n\t\t\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{ this.renderInput('username', 'Email', 'email', null, true) }\r\n\t\t\t\t\t{ this.renderInput('name', 'Name') }\r\n\t\t\t\t\t{ this.renderInput('password', 'Password', 'password')} \r\n\t\t\t\t\t{ this.renderButton('Register') }\r\n\t\t\t\t</form>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default RegisterForm;","import React, { Component } from 'react';\r\nimport auth from '../services/authService';\r\n\r\nclass Logout extends Component {\r\n\tcomponentDidMount() {\r\n\t\tauth.logout();\r\n\t\twindow.location\t= '/';\r\n\t}\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport auth from '../../services/authService';\r\n\r\nconst ProtectedRoute\t= ({ component: Component, render, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={props => {\r\n\t\t\t\tif(!auth.getCurrentUser()) {\r\n\t\t\t\t\ttoast.error('Unauthorized, baby! Please log in.');\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Redirect to={{\r\n\t\t\t\t\t\t\tpathname: '/login',\r\n\t\t\t\t\t\t\tstate: { from: props.location }\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} \r\n\t\t\t\treturn Component ? <Component {...props} /> : render=(props);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ProtectedRoute;","import React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport Movies\t\t\tfrom './components/movies';\nimport MovieForm\t\tfrom './components/movieForm';\nimport Customers\t\tfrom './components/customers';\nimport Rentals\t\t\tfrom './components/rentals';\nimport NotFound\t\t\tfrom './components/common/not-found';\nimport NavBar\t\t\tfrom './components/common/navBar';\nimport LoginForm\t\tfrom './components/loginForm';\nimport RegisterForm\t\tfrom './components/registerForm';\nimport Logout\t\t\tfrom './components/logout';\nimport ProtectedRoute\tfrom './components/common/protectedRoute';\nimport auth\t\t\t\tfrom './services/authService';\n//import logger\t\t\tfrom './services/logService';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nclass App extends Component {\n\tstate\t= {};\n\t\n\tcomponentDidMount() {\n\t\tconst user\t= auth.getCurrentUser();\n\t\tthis.setState({ user });\n\t}\n\t\n\trender() {\n\t\tconst { user } = this.state;\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t<ToastContainer />\n\t\t\t\t<NavBar user={this.state.user}/>\n\t\t\t\t<main className='container'>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path='/register'\t\tcomponent={RegisterForm} />\n\t\t\t\t\t\t<Route path='/login'\t\tcomponent={LoginForm} />\n\t\t\t\t\t\t<ProtectedRoute\n\t\t\t\t\t\t\tpath='/movies/:id'\n\t\t\t\t\t\t\tcomponent={MovieForm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath='/movies'\n\t\t\t\t\t\t\trender={props => <Movies {...props} user={this.state.user}/>}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ProtectedRoute\n\t\t\t\t\t\t\tpath='/movies/new'\n\t\t\t\t\t\t\tcomponent={MovieForm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route path='/customers'\tcomponent={Customers} />\n\t\t\t\t\t\t<Route path='/rentals'\t\tcomponent={Rentals} />\n\t\t\t\t\t\t<Route path='/logout'\t\tcomponent={Logout} />\n\t\t\t\t\t\t<Route path='/not-found'\tcomponent={NotFound} />\n\t\t\t\t\t\t<Redirect from='/' to='/movies' />\n\t\t\t\t\t\t<Redirect to='/not-found' />\n\t\t\t\t\t</Switch>\n\t\t\t\t</main>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'font-awesome/css/font-awesome.css';\n\nconsole.log(process.env);\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>, document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}